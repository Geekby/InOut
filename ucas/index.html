<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
		<title>Select</title>
	</head>
	<body>
		<canvas id="frontcanvas" style="pointer-events:none;top: 0;left: 0;position: absolute;z-index: 999;display: none;"></canvas>
		<video style="position: absolute;left: 0px;top: 0px;object-fit: cover;display: none;" id="qr-video" width="100%" height="100%" autoplay="" playsinline muted></video>
		<table style="margin: auto;">
			<form action="detail.html" name="form" method="get">
				<tr>
					<td>
						姓名：
					</td>
					<td>
						<input type="text" name="name" id="name" style="height: 40px;width: 200px;" />
					</td>
				</tr>
				<tr>
					<td>
						学号：
					</td>
					<td>
						<input type="text" name="number" id="number" style="height: 40px;width: 200px;" />
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<input id="change" type="button" style="height: 40px;width: 100%;background-color: goldenrod;color: azure;border: 0px;font-size: larger;" value="更换" onclick="generate()" />
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<input type="submit" style="height: 40px;width: 100%;;background-color: seagreen;color: azure;border: 0px;font-size: larger;" value="生成">
					</td>
				</tr>
				<tr>
					<td colspan="2">
						<input type="button" style="height: 40px;width: 100%;;background-color: royalblue;color: azure;border: 0px;font-size: larger;" value="摄像头" id="CAM">
						<span style="font-size: 12;">* 开启摄像头后单击画面关闭摄像头</span>
					</td>
				</tr>
			</form>
		</table>
		<script>
			var list_last = ["李","王","张","刘","陈","杨","黄","赵","周","吴","徐","孙","朱","马","胡","郭","林","何","高","梁","郑","罗","宋","谢","唐","韩","曹","许","邓","萧","冯","曾","程","蔡","彭","潘","袁","于","董","余","苏","叶","吕","魏","蒋","田","杜","丁","沈","姜","范","江","傅","钟","卢","汪","戴","崔","任","陆","廖","姚","方","金","邱","夏","谭","韦","贾","邹","石","熊","孟","秦","阎","薛","侯","雷","白","龙","段","郝","孔","邵","史","毛","常","万","顾","赖","武","康","贺","严","尹","钱","施","牛","洪","龚","汤","陶","黎","温","莫","易","樊","乔","文","安","殷","颜","庄","章","鲁","倪","庞","邢","俞","翟","蓝","聂","齐","向","申","葛","岳"];
			var list_first = ["嘉","琼","桂","娣","叶","璧","璐","娅","琦","晶","妍","茜","秋","珊","莎","锦","黛","青","倩","婷","姣","婉","娴","瑾","颖","露","瑶","怡","婵","雁","蓓","纨","仪","荷","丹","蓉","眉","君","琴","蕊","薇","菁","梦","岚","苑","婕","馨","瑗","琰","韵","融","园","艺","咏","卿","聪","澜","纯","毓","悦","昭","冰","爽","琬","茗","羽","希","宁","欣","飘","育","滢","馥","筠","柔","竹","霭","凝","晓","欢","霄","枫","芸","菲","寒","伊","亚","宜","可","姬","舒","影","荔","枝","思","丽","秀","娟","英","华","慧","巧","美","娜","静","淑","惠","珠","翠","雅","芝","玉","萍","红","娥","玲","芬","芳","燕","彩","春","菊","勤","珍","贞","莉","兰","凤","洁","梅","琳","素","云","莲","真","环","雪","荣","爱","妹","霞","香","月","莺","媛","艳","瑞","凡","佳","涛","昌","进","林","有","坚","和","彪","博","诚","先","敬","震","振","壮","会","群","豪","心","邦","承","乐","绍","功","松","善","厚","庆","磊","民","友","裕","河","哲","江","超","浩","亮","政","谦","亨","奇","固","之","轮","翰","朗","伯","宏","言","若","鸣","朋","斌","梁","栋","维","启","克","伦","翔","旭","鹏","泽","晨","辰","士","以","建","家","致","树","炎","德","行","时","泰","盛","雄","琛","钧","冠","策","腾","伟","刚","勇","毅","俊","峰","强","军","平","保","东","文","辉","力","明","永","健","世","广","志","义","兴","良","海","山","仁","波","宁","贵","福","生","龙","元","全","国","胜","学","祥","才","发","成","康","星","光","天","达","安","岩","中","茂","武","新","利","清","飞","彬","富","顺","信","子","杰","楠","榕","风","航","弘"];
			function generate(){
				document.getElementById("name").value = list_last[Math.floor(Math.random() * list_last.length)] + list_first[Math.floor(Math.random() * list_first.length)] + (Math.random() >= 0.5 ? list_first[Math.floor(Math.random() * list_first.length)] : "");
				document.getElementById("number").value = (new Date().getFullYear() - Math.floor(Math.random() * 3)).toString();
				for (var i = 0; i < 11; i++) {
					document.getElementById("number").value += Math.floor(Math.random() * 9).toString();
				}
			}
			generate();
		</script>
		<script type="module">
			import QrScanner from "../qr-scanner/qr-scanner.min.js";
			QrScanner.WORKER_PATH = '../qr-scanner/qr-scanner-worker.min.js';
			document.getElementById("CAM").onclick = function() {
				document.getElementById("qr-video").style.display = "block";
				const video = document.getElementById('qr-video');
					
				function setResult(result) {
					;
				}
						
				var scanner = new QrScanner(video, result => setResult(result));
						
				window.scanner = scanner;
				scanner.start();
				document.title = ' ';
				var frontcanvas = document.getElementById("frontcanvas");
				var frontCtx = frontcanvas.getContext("2d");
				var width = window.screen.width;
				var height = window.screen.height;
				var grd;
				var yDelta = 0;
				var ryStart = height * 0.1;
				var yStart = height * 0.1 + width * 0.6;
				var yEnd = height * 0.7;
				var step = 2;
				frontcanvas.width = width;
				frontcanvas.height = yEnd;
				frontcanvas.style.display = "block";
				setInterval(draw, 10);
				function draw(){
					if(yDelta >= height){
						yDelta = 0;
					}
					frontCtx.clearRect(0,0,width,yEnd);
					grd = frontCtx.createRadialGradient(width / 2,yStart + yDelta + 30,width * 0.6,width / 2,yStart + yDelta,width * 0.7);
					grd.addColorStop(0,"rgba(45, 241, 1, 1.0)");
					grd.addColorStop(1,"rgba(255, 255, 255, 0)");
					frontCtx.fillStyle = grd;
					frontCtx.fillRect(0,ryStart + yDelta,width,15);
					yDelta = yDelta+step;
				}
			}
			document.getElementById("qr-video").onclick = function() {
				document.form.submit();
			}
		</script>
	</body>
</html>